<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml">

    <ui:define name="content">

        <div class="card">
            <div class="p-grid">
                <h:form id="form_category" class="card p-col-12 p-md-4">

                    <h5 class="p-mt-0">Register Lab Tests</h5>
                     <div class="ui-fluid p-formgrid p-grid p-col-12 p-md-12" >
                    <div class="p-field ">
                         <h:outputLabel value="Test Category:" />
                         <p:selectOneMenu id="testcat" value="#{adminBean.test_category_id}" required="true">  
                        <f:selectItem itemLabel="Select Category" itemValue="Select" />  
                        <f:selectItems value="#{adminBean.admin_get_test_categories()}" var="category" itemLabel="#{category.category_desc}" itemValue="#{category.category_id}" />  
                    </p:selectOneMenu>
                    </div>
                      <div class="p-field ">
                         <h:outputLabel value="Test Name:" />
                         <p:inputText  id="testname"  required="true" value="#{adminBean.test_name}"/>
                      </div>
                          <div class="p-field ">
                         <h:outputLabel value="Price:" />
                         <p:inputNumber value="#{adminBean.testprice}" thousandSeparator="" decimalSeparator="." decimalPlaces="0" required="true"/>
                         </div>
                     </div>
                    
                    <p:commandButton id="saveBtn" value="Save" action="#{adminBean.admin_add_test_name()}" update=":categoryTbl:testnamesTbl,form_category" icon="pi pi-check"   styleClass="p-mt-3" />

                    <p:messages/>
                </h:form>
                <h:form id="categoryTbl" class="card p-col-12 p-md-8">
                    <p:messages id="messages"/>
                    <p:dataTable widgetVar="testTble" id="testnamesTbl" value="#{adminBean.admin_get_test_names()}" rows="5" size="small" showGridlines="true"
                                 paginator="true" scrollable="true"  editable="true" 
                                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records"
                                 rowsPerPageTemplate="5,10,100,200,500,1000,{ShowAll|'All'}" var="pres" style="width: 100%;"
                                 emptyMessage="No Test Category Has Been Added ">
                        <f:facet name="header">
                            <div class="p-d-flex p-ai-center p-jc-between">
                                <h5>List of Lab tests</h5>
                              </div>
                        </f:facet>
                        <p:ajax event="rowEdit" listener="#{dynamicFunctionsBean.admin_edit_dataTableDoublecolumns('test_names', 'test_name', 'test_id', pres.test_name_id, testname.value,'price',testprice.value)}" update="testnamesTbl,:categoryTbl:messages"  />
                        <p:ajax event="rowEditCancel" listener="#{dynamicFunctionsBean.onRowCancel}" update="testnamesTbl" />

                        <p:column headerText="Category" styleClass="tblcol5" >  
                            #{pres.test_category}  
                        </p:column>
                        
                        <p:column headerText="Test Name" filterBy="#{pres.test_name}" styleClass="tblcol4" > 
                             <p:cellEditor>
                                <f:facet name="output"><h:outputText value="#{pres.test_name}" /></f:facet>
                                <f:facet name="input"><p:inputText   placeholder="#{pres.test_name}" binding="#{testname}" class="form-control" label="testname"/></f:facet>
                            </p:cellEditor>
                        </p:column> 
                        <p:column headerText="Price"  styleClass="tblcol4" > 
                             <p:cellEditor>
                                 <f:facet name="output"><h:outputText value="#{pres.testprice}" /></f:facet>
                                <f:facet name="input"><p:inputText placeholder="#{pres.testprice}" binding="#{testprice}" class="form-control" label="testprice"/></f:facet>
                            </p:cellEditor>
                        </p:column> 

                        <p:column styleClass="tblcol2" >  
                            <p:rowEditor id="edit_testname" />
                            <p:tooltip for="edit_testname" value="edit lab test" position="right"/>
                        </p:column> 

                    </p:dataTable>
                </h:form>
            </div>
        </div>

    </ui:define>
</ui:composition>
