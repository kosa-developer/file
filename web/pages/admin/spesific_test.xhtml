<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml">

    <ui:define name="content">

        <div class="card p-grid">
            <h:form id="form_subtest" class="card p-col-12 p-md-4">
                 <h5>Register Specific test</h5>
                <div class="ui-fluid p-formgrid p-grid p-col-12 p-md-12" >
                    <div class="p-field ">
                    <h:outputLabel value="Test category"/>
                    <p:selectOneMenu filter="true"  id="testcat" value="#{adminBean.test_category_id}" required="true">  
                        <f:selectItem itemLabel="Select Category" itemValue="Select" />  
                        <f:selectItems value="#{adminBean.admin_get_test_categories()}" var="category" itemLabel="#{category.category_desc}" itemValue="#{category.category_id}" />  
                        <p:ajax update="testname"/>
                    </p:selectOneMenu>
                </div>
                <div class="p-field ">
                    <h:outputLabel value="Test Name:" />
                        <p:selectOneMenu filter="true"    id="testname" value="#{adminBean.test_name_id}" required="true">  
                            <f:selectItem itemLabel="Select Test Name" itemValue="Select" />  
                            <f:selectItems value="#{dynamicFunctionsBean.ReturnSpecialdropdownList('test_names', 'test_id', 'test_name','category_id', adminBean.test_category_id)}" var="test" itemLabel="#{test.dropdownValue}" itemValue="#{test.dropdownId}" />  
                        </p:selectOneMenu>
                   </div>
                <div class="p-field ">

                    <h:outputLabel value="Specific Test:" />
                    <p:inputText id="specifictest"   value="#{adminBean.specific_test}"   required="true"/>
                </div>
                </div>
                <p:commandButton id="saveBtn" value="Save" action="#{adminBean.admin_add_specific_test()}" update=":tableform:subtesttb,form_subtest" icon="pi pi-check"   styleClass="p-mt-3" />

                <p:messages/>
            </h:form>
            <h:form id="tableform" class="card p-col-12 p-md-8">

                <p:dataTable rows="5" widgetVar="specifictestTable" id="subtesttb" value="#{adminBean.admin_get_specific_tests()}" 
                             paginator="true" scrollable="true" editable="true" 
                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records"
                             rowsPerPageTemplate="5,10,100,200,500,1000,{ShowAll|'All'}"
                             showGridlines="true" size="small" var="pres" style="width: 100%;"
                             emptyMessage="No Specific Test Has Been Added ">
                    <f:facet name="header">
                        <div class="p-d-flex p-ai-center p-jc-between">
                            <h5>List of Specific tests</h5>
                        </div>
                    </f:facet>
                    <p:ajax event="rowEdit" listener="#{dynamicFunctionsBean.admin_edit_table_data('specific_tests', 'specific_test', 'specific_test_id', pres.specific_test_id, specific.value)}" update="subtesttb"  />
                    <p:ajax event="rowEditCancel" listener="#{dynamicFunctionsBean.onRowCancel}" update="subtesttb" />

                    <p:column headerText="Test Category"   filterBy="#{pres.test_category}"  sortBy="#{pres.test_category}">  
                        #{pres.test_category}  
                    </p:column>

                    <p:column headerText="Test Name" filterBy="#{pres.test_name}" sortBy="#{pres.test_name}"  >  
                        #{pres.test_name}  
                    </p:column>


                      <p:column headerText="Specific Test" filterBy="#{pres.specific_test}" sortBy="#{pres.specific_test}" > 
                             <p:cellEditor>
                                 <f:facet name="output"><h:outputText value="#{pres.specific_test}" /></f:facet>
                                <f:facet name="input"><p:inputText placeholder="#{pres.specific_test}" binding="#{specific}" class="form-control" label="specific"/></f:facet>
                            </p:cellEditor>
                        </p:column> 

                        <p:column styleClass="tblcol2">  
                            <p:rowEditor id="edit_specific" />
                            <p:tooltip for="edit_specific" value="edit specific test" position="right"/>
                        </p:column> 

                </p:dataTable>
            </h:form>
        </div>

    </ui:define>
</ui:composition>
