<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml">

    <ui:define name="head">
        <style type="text/css">
            button.ui-button {
                margin-right: .5rem;
            }
        </style>
    </ui:define>
    <ui:define name="content">
        <div class="card">
            <div class="p-col-12 p-md-12 p-sm-12">
                <h5>Patient information </h5>
            </div>
            <h:form id="receptionform">
                <h:panelGrid columns="3" cellpadding="5">
                    <p:photoCam widgetVar="pc" listener="#{reception.oncapture}" update="photo"/>
                    <p:commandButton type="button" value="Capture" onclick="PF('pc').capture()"/>
                    <p:outputPanel id="photo">
                        <p:graphicImage name="demo/images/photocam/#{reception.filename}.jpeg"
                                        rendered="#{not empty reception.filename}"/>
                    </p:outputPanel>
                </h:panelGrid>
                <div class="p-grid">

                    <div class="p-col-12 p-md-4 p-sm-12 card">
                        <div class="ui-fluid">
                            <div class="p-field p-grid">
                                <p:selectOneRadio id="console" value="#{radioView.console}" unselectable="true" required="true">
                                    <f:selectItem itemLabel="New patient" itemValue="New patient"/>
                                    <f:selectItem itemLabel="Revisit" itemValue="Revisit"/>
                                </p:selectOneRadio>
                            </div>
                        </div>
                        <div class="ui-fluid">
                            <div class="p-field p-grid">
                                <p:outputLabel  styleClass="p-col-12 p-md-4" value="Patient Id"/>
                                <div class="p-col-12 p-md-8">
                                    <p:inputText  required="true" readonly="true"/>
                                </div>
                            </div>
                        </div>
                        <div class="ui-fluid">
                            <div class="p-field p-grid">
                                <p:outputLabel  styleClass="p-col-12 p-md-4" value="Patient name"/>
                                <div class="p-col-12 p-md-8">
                                    <p:inputText  required="true"/>
                                </div>
                            </div>
                        </div> 
                        <div class="ui-fluid">
                            <div class="p-field p-grid">
                                <p:outputLabel  styleClass="p-col-12 p-md-12" value="Patient category"/>
                                <p:selectOneRadio   unselectable="true">
                                    <f:selectItem itemLabel="Ugandan" itemValue="Ugandan"/>
                                    <f:selectItem itemLabel="Refugee" itemValue="Refugee"/>
                                    <f:selectItem itemLabel="Foreigner" itemValue="Foreigner"/>
                                </p:selectOneRadio>
                            </div>
                        </div>
                        <div class="ui-fluid">
                            <div class="p-field p-grid">
                                <p:outputLabel  styleClass="p-col-12 p-md-4" value="NIN/ID"/>
                                <div class="p-col-12 p-md-8">
                                    <p:inputText />
                                </div>
                            </div>
                        </div>


                    </div>


                    <div class="p-col-12 p-md-4 p-sm-12 card">

                        <div class="ui-fluid">
                            <div class="p-field p-grid">
                                <p:outputLabel  styleClass="p-col-12 p-md-2" value="DOB"/>
                                <div class="p-col-12 p-md-5">
                                    <p:calendar readonlyInput="true" yearRange="c-120:c+120" navigator="true"  pattern="dd-MM-yyyy"  /> 
                                </div>
                                <div class="p-field p-grid p-col-12 p-md-5">
                                    <p:outputLabel  styleClass="p-col-12 p-md-3" value="Age"/>
                                    <div class="p-col-12 p-md-9">
                                        <p:inputText />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="ui-fluid">
                            <div class="p-field p-grid">
                                <div class="p-field p-grid p-col-12 p-md-5">
                                    <p:outputLabel  styleClass="p-col-12 p-md-2" value="Gender"/>
                                    <p:selectOneRadio  unselectable="true">
                                        <f:selectItem itemLabel="M" itemValue="M"/>
                                        <f:selectItem itemLabel="F" itemValue="F"/>
                                    </p:selectOneRadio>
                                </div>

                                <div class="p-field p-grid p-col-12 p-md-7">
                                    <p:outputLabel  styleClass="p-col-12 p-md-12" value="Phone"/>
                                    <div class="p-col-12 p-md-12">
                                        <p:inputText />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="ui-fluid">
                            <div class="p-field p-grid">
                                <p:outputLabel  styleClass="p-col-12 p-md-4" value="District"/>
                                <div class="p-col-12 p-md-8">
                                    <p:inputText />
                                </div>
                            </div>
                        </div>
                        <div class="ui-fluid">
                            <div class="p-field p-grid">
                                <p:outputLabel  styleClass="p-col-12 p-md-4" value="Subcounty"/>
                                <div class="p-col-12 p-md-8">
                                    <p:inputText />
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="p-col-12 p-md-4 p-sm-12 card">


                        <div class="ui-fluid">
                            <div class="p-field p-grid">
                                <p:outputLabel  styleClass="p-col-12 p-md-4" value="Village"/>
                                <div class="p-col-12 p-md-8">
                                    <p:inputText />
                                </div>
                            </div>
                        </div>

                        <h6>Next of kin</h6>
                        <div class="ui-fluid">
                            <div class="p-field p-grid">
                                <p:outputLabel  styleClass="p-col-12 p-md-4" value="Name"/>
                                <div class="p-col-12 p-md-8">
                                    <p:inputText />
                                </div>
                            </div>
                        </div>
                        <div class="ui-fluid">
                            <div class="p-field p-grid">
                                <p:outputLabel  styleClass="p-col-12 p-md-4" value="Relationship"/>
                                <div class="p-col-12 p-md-8">
                                    <p:inputText />
                                </div>
                            </div>
                        </div>
                        <div class="ui-fluid">
                            <div class="p-field p-grid">
                                <p:outputLabel  styleClass="p-col-12 p-md-4" value="Phone"/>
                                <div class="p-col-12 p-md-8">
                                    <p:inputText />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="p-col-12 p-md-12 p-sm-12 card p-grid">
                        <div class="p-col-12 p-md-12 p-sm-12">
                            <h5>Patient Vitals </h5>
                        </div>

                        <div class="ui-fluid p-col-12 p-md-4 p-sm-12">

                            <div class="p-field p-grid">
                                <p:outputLabel  styleClass="p-col-12 p-md-4" value="Weight:"/>
                                <div class="p-col-12 p-md-8">
                                    <p:spinner id="weightSpinner" size="4" value="#{receptionBean.reception_info.weight}" stepFactor="0.1" onkeypress="validate(event);
                                            if (event.keyCode == 13) {
                                                calculateBMIorZscore()
                                            }
                                            ;"><f:convertNumber pattern="#.#"/></p:spinner>
                                </div>
                            </div>
                            <div class="p-field p-grid">
                                <p:outputLabel  styleClass="p-col-12 p-md-4" value="Height"/>
                                <div class="p-col-12 p-md-8">
                                    <p:spinner id="heightSpinner" size="4" value="#{receptionBean.reception_info.height}" stepFactor="0.1" onkeypress="validate(event);
                                            if (event.keyCode == 13) {
                                                calculateBMIorZscore()
                                            }
                                            ;"><f:convertNumber pattern="#.#"/></p:spinner>
                                </div>
                            </div>
                            <div class="p-field p-grid">
                                <p:outputLabel  styleClass="p-col-12 p-md-4" value="#{receptionBean.weight_for_height_label}"/>
                                <div class="p-col-12 p-md-8">
                                    <p:outputLabel id="weightforheight" value="#{receptionBean.reception_info.weight_For_Height}" style="color: blue;" />
                                </div>
                            </div>
                            <div class="p-field p-grid ">
                                <p:outputLabel   styleClass="p-col-12 p-md-4" value="Temperature"/>
                                <div class="p-col">
                                    <p:spinner id="tempSpinner" size="4" value="#{receptionBean.reception_info.temperature}" stepFactor="0.01" onkeypress="validate(event);"/>

                                </div>
                            </div>
                            <div class="p-field p-grid ">
                                <p:outputLabel   styleClass="p-col-12 p-md-4" value="Oxgyen Saturation:"/>
                                <div class="p-col">
                                    <p:inputText value="#{receptionBean.reception_info.oxy_saturation}" onkeypress="validate(event);"/>
                                </div>
                            </div>
                            <div class="p-field p-grid ">
                                <p:outputLabel   styleClass="p-col-12 p-md-4" value="Pulse:"/>
                                <div class="p-col">
                                    <p:inputText value="#{receptionBean.reception_info.heart_pulse}" onkeypress="validate(event);"/>

                                </div>
                            </div>

                        </div>
                        <div class="ui-fluid p-col-12 p-md-4 p-sm-12">

                            <div class="p-field p-grid ">
                                <p:outputLabel   styleClass="p-col-12 p-md-4" value="Blood Pressure:"/>
                                <div class="p-col">
                                    <p:inputText value="#{receptionBean.reception_info.blood_pressure}" onkeypress="validate(event);"/>

                                </div>
                            </div>
                            <div class="p-field p-grid ">
                                <p:outputLabel   styleClass="p-col-12 p-md-4" value="Respiratory Rate:"/>
                                <div class="p-col">
                                    <p:inputText value="#{receptionBean.reception_info.respiratory_rate}" onkeypress="validate(event);"/>

                                </div>
                            </div>

                            <div class="p-field p-grid ">
                                <p:outputLabel   styleClass="p-col-12 p-md-4" value="ITN In Use:"/>
                                <div class="p-col">
                                    <p:selectOneMenu value="#{receptionBean.reception_info.itn_in_use}" required="true"> 
                                        <f:selectItem itemLabel="select" itemValue="" />  
                                        <f:selectItem itemLabel="True" itemValue="True" />  
                                        <f:selectItem itemLabel="False" itemValue="False" />  
                                    </p:selectOneMenu>
                                </div>
                            </div>
                            <div class="p-field p-grid">
                                <p:outputLabel  styleClass="p-col-12 p-md-4" value="MUAC:"/>
                                <div class="p-col-12 p-md-8">
                                    <p:inputText value="#{receptionBean.reception_info.muac}" onkeypress="validate(event);" />
                                </div>
                            </div>
                            <div class="p-field p-grid">
                                <p:outputLabel  styleClass="p-col-12 p-md-4" value="Immunisation:"/>
                                <div class="p-col-12 p-md-8">
                                    <p:selectOneMenu value="#{receptionBean.reception_info.imm_status}" >
                                        <f:selectItem itemLabel="Select" itemValue="Select" />  
                                        <f:selectItem itemLabel="Incomplete" itemValue="Incomplete" />  
                                        <f:selectItem itemLabel="Not Up To Date" itemValue="Not Up To Date" />
                                        <f:selectItem itemLabel="Up To Date" itemValue="Up To Date" />
                                        <f:selectItem itemLabel="Complete" itemValue="Complete" />  
                                        <f:selectItem itemLabel="Not Known" itemValue="Not Known" />  
                                    </p:selectOneMenu>
                                </div>
                            </div>

                        </div>

                        <div class="ui-fluid p-col-12 p-md-4 p-sm-12">

                            <div class="p-field p-grid">
                                <p:outputLabel  styleClass="p-col-12 p-md-4" value="Tobacco Exposure:"/>
                                <div class="p-col-12 p-md-8">
                                    <p:selectOneMenu value="#{receptionBean.reception_info.smoker}">
                                        <f:selectItem itemLabel="Select" itemValue="" />  
                                        <f:selectItem itemLabel="Current Smoker" itemValue="Current" />  
                                        <f:selectItem itemLabel="Previous Smoker" itemValue="Previous" />
                                        <f:selectItem itemLabel="Currently exposed" itemValue="Exposed" />
                                        <f:selectItem itemLabel="None of these" itemValue="None" />
                                    </p:selectOneMenu>
                                </div>
                            </div>
                            <div class="p-field p-grid">
                                <p:outputLabel  styleClass="p-col-12 p-md-4" value="Ever Drinks Alcohol:"/>
                                <div class="p-col-12 p-md-8">
                                    <p:selectOneMenu value="#{receptionBean.reception_info.alcohol}" >
                                        <f:selectItem itemLabel="Select" itemValue="" />  
                                        <f:selectItem itemLabel="No" itemValue="No" />  
                                        <f:selectItem itemLabel="Yes" itemValue="Yes" />
                                    </p:selectOneMenu>
                                </div>
                            </div>

                            <div class="p-field p-grid ">
                                <p:outputLabel   styleClass="p-col-12 p-md-4" value="Reffered in"/>
                                <div class="p-col">
                                    <p:selectOneMenu required="true" >
                                        <f:selectItem itemLabel="Select" itemValue="" />
                                        <f:selectItem itemLabel="No" itemValue="No"/>
                                        <f:selectItem itemLabel="Yes with form" itemValue="Yes-with form"/>
                                        <f:selectItem itemLabel="Yes without form" itemValue="Yes-without form"/>
                                    </p:selectOneMenu>
                                </div>
                            </div>

                            <div class="p-field p-grid">
                                <p:outputLabel  styleClass="p-col-12 p-md-4" value="Reffered from"/>
                                <div class="p-col-12 p-md-8">
                                    <p:inputText />
                                </div>
                            </div>
                            <div class="p-field p-grid">
                                <p:outputLabel  styleClass="p-col-12 p-md-4" value="Refferal Number"/>
                                <div class="p-col-12 p-md-8">
                                    <p:inputText />
                                </div>
                            </div>
                        </div>
                        <div class="ui-fluid p-col-12 p-md-8 p-sm-12">
                            <div class="p-field p-grid ">
                                <p:outputLabel   styleClass="p-col-12 p-md-4" value="Problem and Reason for Visit:"/>
                                <div class="p-col">
                                    <p:inputTextarea  autoResize="false" value="#{receptionBean.reception_info.problem}"/>

                                </div>
                            </div>
                        </div>
                        <div class="ui-fluid p-col-12 p-md-4 p-sm-12">
                            <div class="p-field p-grid ">
                                <p:outputLabel   styleClass="p-col-12 p-md-4" value="Triage Category:"/>
                                <div class="p-col">
                                    <p:selectOneMenu value="#{receptionBean.reception_info.triage_category}" required="true">  
                                        <f:selectItem itemLabel="select" itemValue="" /> 
                                        <f:selectItem itemLabel="Green (Normal)" itemValue="Green" />  
                                        <f:selectItem itemLabel="Yellow (Priority)" itemValue="Yellow" />  
                                        <f:selectItem itemLabel="Red (Emergency)" itemValue="Red" />

                                    </p:selectOneMenu>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <p:messages id="notification"/>
                <div class="card">
                    <h5>Forward Patient</h5>
                    <p:tabView dynamic="true" cache="true">
                        <p:tab title="Consultation">
                            <div class="p-col-12 p-md-12 p-sm-12">
                                <div class="p-field p-grid p-col-12 p-md-4 p-sm-12">
                                    <p:outputLabel   styleClass="p-col-12 p-md-4" value="Price:"/>
                                    <div class="p-col">
                                        <p:inputNumber/>
                                    </div>
                                </div>
                                <p:selectBooleanCheckbox  value="#{receptionBean.reception_info.skip_accounts}" itemLabel="Skip Accounts" disabled="#{receptionBean.disable_skip}"/>  
                                <p:commandButton value="Forward Patient" icon="pi pi-check" iconPos="right"  styleClass="ui-button-raised ui-button-primary" action="#{receptionBean.reception_forward_patient(userid.value)}" update=":receptionform:notification" />
                                <p:commandButton value="Cancel" icon="pi pi-times" iconPos="right"  styleClass="ui-button-raised ui-button-warning" action="#{receptionBean.reception_clear_objects()}"   style="width: 100px;"/>

                            </div>
                        </p:tab>
                        <p:tab title="Lab">
                            <div class="p-grid">
                                <div class="ui-fluid p-col-12 p-md-4 p-sm-12 card">
                                    <div class="p-field p-grid ">
                                        <p:outputLabel   styleClass="p-col-12 p-md-4" value="Test Category:"/>
                                        <div class="p-col">
                                            <p:selectOneMenu id="testcat" value="#{receptionBean.test_category_id}">  
                                                <f:selectItem itemLabel="Select Category" itemValue="0" />  
                                                <f:selectItems value="#{receptionBean.reception_get_test_categoryz()}" var="category" itemLabel="#{category.category_desc}" itemValue="#{category.category_id}" />  
                                                <p:ajax listener="#{receptionBean.reception_get_test_names()}" update="testname"/>
                                            </p:selectOneMenu>
                                        </div>
                                    </div>
                                    <div class="p-field p-grid ">
                                        <p:outputLabel   styleClass="p-col-12 p-md-4" value="Test Name:"/>
                                        <div class="p-col">
                                            <p:selectOneMenu id="testname" value="#{receptionBean.test_name_id}">  
                                                <f:selectItem itemLabel="Select Test Name" itemValue="0" />  
                                                <f:selectItems value="#{receptionBean.test_names}" var="test" itemLabel="#{test.test_name}" itemValue="#{test.test_name_id}" />  
                                            </p:selectOneMenu>
                                        </div>
                                    </div>
                                    <div class="p-field p-grid ">
                                        <p:outputLabel   styleClass="p-col-12 p-md-4" value="Price:"/>
                                        <div class="p-col">
                                            <p:inputNumber/>
                                        </div>
                                    </div>
                                    <div class="p-field p-grid ">
                                        <p:outputLabel   styleClass="p-col-12 p-md-4" value="Priority:"/>
                                        <div class="p-col">
                                            <p:selectOneMenu value="#{receptionBean.lab_urgency}"> 
                                                <f:selectItem itemLabel="Normal" itemValue="Normal" />  
                                                <f:selectItem itemLabel="High" itemValue="High" />
                                            </p:selectOneMenu>
                                        </div>
                                    </div>
                                    <p:commandButton value="Add Test Request" style="width: 220px;" action="#{receptionBean.reception_add_test_request(userid.value)}" update=":receptionform:notification,selectedTests"/>

                                </div>
                                <div class="ui-fluid p-col-12 p-md-8 p-sm-12 card">
                                    <p:dataTable id="selectedTests" value="#{receptionBean.tests_requested}" 
                                                 paginator="true" rows="4" paginatorPosition="bottom" var="testrequest" style="width: 100%;">

                                        <p:column headerText="Test Category" styleClass="tblcol4">  
                                            #{testrequest.category_desc}
                                        </p:column>  

                                        <p:column headerText="Test Name" styleClass="tblcol10">  
                                            #{testrequest.test_name}
                                        </p:column>  
                                        <p:column headerText="Price" styleClass="tblcol10">  
                                            #{testrequest.test_name}
                                        </p:column> 
                                        <p:column styleClass="tblcol2">  
                                            <p:commandLink value="Delete" style="color: black;width: 10%;" action="#{receptionBean.reception_laboratory_delete_pending(testrequest.request_id)}" update="selectedTests,:receptionform:notification"/>
                                        </p:column> 

                                    </p:dataTable>
                                </div>
                            </div>
                            <div class="p-col-12 p-md-12 p-sm-12">
                                <p:selectBooleanCheckbox  value="#{receptionBean.reception_info.skip_accounts}" itemLabel="Skip Accounts" disabled="#{receptionBean.disable_skip}"/>  
                                <p:commandButton value="Forward Patient" icon="pi pi-check" iconPos="right"  styleClass="ui-button-raised ui-button-primary" action="#{receptionBean.reception_forward_patient(userid.value)}" update=":receptionform:notification" />
                                <p:commandButton value="Cancel" icon="pi pi-times" iconPos="right"  styleClass="ui-button-raised ui-button-warning" action="#{receptionBean.reception_clear_objects()}"   style="width: 100px;"/>

                            </div>
                        </p:tab>
                        <p:tab title="Ward">
                            <div class="p-col-12 p-md-12 p-sm-12">

                                <p:selectBooleanCheckbox  value="#{receptionBean.reception_info.skip_accounts}" itemLabel="Skip Accounts" disabled="#{receptionBean.disable_skip}"/>  
                                <p:commandButton value="Forward Patient" icon="pi pi-check" iconPos="right"  styleClass="ui-button-raised ui-button-primary" action="#{receptionBean.reception_forward_patient(userid.value)}" update=":receptionform:notification" />
                                <p:commandButton value="Cancel" icon="pi pi-times" iconPos="right"  styleClass="ui-button-raised ui-button-warning" action="#{receptionBean.reception_clear_objects()}"   style="width: 100px;"/>

                            </div>
                        </p:tab>
                        <p:tab title="X ray">
                            <div class="p-field p-grid p-col-12 p-md-4 p-sm-12">
                                <p:outputLabel   styleClass="p-col-12 p-md-4" value="Price:"/>
                                <div class="p-col">
                                    <p:inputNumber/>
                                </div>
                            </div>
                            <div class="p-col-12 p-md-12 p-sm-12">
                                <p:selectBooleanCheckbox  value="#{receptionBean.reception_info.skip_accounts}" itemLabel="Skip Accounts" disabled="#{receptionBean.disable_skip}"/>  
                                <p:commandButton value="Forward Patient" icon="pi pi-check" iconPos="right"  styleClass="ui-button-raised ui-button-primary" action="#{receptionBean.reception_forward_patient(userid.value)}" update=":receptionform:notification" />
                                <p:commandButton value="Cancel" icon="pi pi-times" iconPos="right"  styleClass="ui-button-raised ui-button-warning" action="#{receptionBean.reception_clear_objects()}"   style="width: 100px;"/>

                            </div> 
                        </p:tab>
                        <p:tab title="Surgery">
                            <div class="p-field p-grid p-col-12 p-md-4 p-sm-12">
                                <p:outputLabel   styleClass="p-col-12 p-md-4" value="Price:"/>
                                <div class="p-col">
                                    <p:inputNumber/>
                                </div>
                            </div>

                            <div class="p-col-12 p-md-12 p-sm-12">
                                <p:selectBooleanCheckbox  value="#{receptionBean.reception_info.skip_accounts}" itemLabel="Skip Accounts" disabled="#{receptionBean.disable_skip}"/>  
                                <p:commandButton value="Forward Patient" icon="pi pi-check" iconPos="right"  styleClass="ui-button-raised ui-button-primary" action="#{receptionBean.reception_forward_patient(userid.value)}" update=":receptionform:notification" />
                                <p:commandButton value="Cancel" icon="pi pi-times" iconPos="right"  styleClass="ui-button-raised ui-button-warning" action="#{receptionBean.reception_clear_objects()}"   style="width: 100px;"/>

                            </div>

                        </p:tab>
                    </p:tabView>

                </div>

            </h:form>
        </div>

        <h:form id="testform">
            <p:messages/>
            <p:commandButton value="test" action="#{reception.submit()}" update="testform"/>
        </h:form>
    </ui:define>

</ui:composition>

